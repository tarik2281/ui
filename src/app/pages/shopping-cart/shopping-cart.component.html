<div class="container">
  <div class="row">
    <div class="col-12">
      <h1 class="app-content-title">Warenkorb</h1>
    </div>
  </div>
  <div class="row mt-3" *ngIf="cartService.shoppingCart.products.length < 1">
    <div class="col-12 empty-message">
      Ihr Warenkorb ist zurzeit leer.
    </div>
  </div>
  <div class="row" *ngIf="cartService.shoppingCart.products.length > 0">
    <div class="entries">
      <div class="cart-entry-container" *ngFor="let entry of cartService.shoppingCart.products">
        <img [src]="entry.product.thumbnailUrl">
        <h4>{{ entry.product.title }}</h4>
        <div class="flex-grow-1"></div>
        <mat-form-field appearance="outline" color="accent">
          <mat-label>Anzahl</mat-label>
          <mat-select [(ngModel)]="entry.amount">
            <mat-option [value]="1">1</mat-option>
            <mat-option [value]="2">2</mat-option>
            <mat-option [value]="3">3</mat-option>
            <mat-option [value]="4">4</mat-option>
            <mat-option [value]="5">5</mat-option>
          </mat-select>
        </mat-form-field>
        <p class="product-price">{{ entry.product.price | currency:'EUR' }}</p>
        <button mat-icon-button matTooltip="Vom Warenkorb entfernen" (click)="cartService.removeProduct(entry.product)">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>
    <div class="side-box" #sideBox>
      <div #checkoutContainer class="checkout-container mat-elevation-z2 d-flex flex-column" [ngStyle]="{ position: isAdded ? 'fixed' : 'inherit', top: boxY + 'px', left: boxX + 'px', width: isAdded ? boxWidth + 'px' : 'initial'}">
        <div class="d-flex mb-4">
          <h5>Rechnung</h5>
        </div>
        <div class="line mb-3"></div>
        <div class="d-flex flex-row mb-3">
          <span>Zwischensumme:</span>
          <div class="flex-grow-1"></div>
          <span>{{ cartService.calculateProductSum() | currency:'EUR' }}</span>
        </div>
        <div class="d-flex flex-row mb-3">
          <span>Versandkosten:</span>
          <div class="flex-grow-1"></div>
          <span>{{ cartService.getShippingFee() | currency:'EUR' }}</span>
        </div>
        <div class="d-flex flex-row mb-3">
          <span>Mehrwertsteuer (inkl.):</span>
          <div class="flex-grow-1"></div>
          <span>{{ cartService.calculateTaxes() | currency:'EUR' }}</span>
        </div>
        <div class="line mb-4"></div>
        <div class="d-flex flex-row mb-3">
          <span class="total-sum">Gesamtsumme:</span>
          <div class="flex-grow-1"></div>
          <span class="total-sum">{{ cartService.calculateTotalSum() | currency:'EUR' }}</span>
        </div>
        <div class="d-flex flex-row">
          <div class="flex-grow-1"></div>
          <button mat-raised-button color="accent">Zur Kasse gehen</button>
        </div>
      </div>
    </div>
  </div>
</div>
